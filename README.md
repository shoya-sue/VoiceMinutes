# VoiceMinutes（ボイスミニッツ）開発仕様書
**プロジェクト名**: VoiceMinutes - 音声会議録自動生成ツール

## プロジェクト概要

音声ファイルをアップロードするだけで、自動的に構造化された議事録をMarkdown形式で生成するWebツール。プロジェクトマネージャーやディレクターが会議後の作業効率化を図ることを目的とする。

## 機能要件

### 主要機能
- 音声ファイルのアップロード（mp3, wav, m4a対応）
- ブラウザのWeb Speech APIを使用した音声認識
- 話者の区別（可能な範囲で）
- 構造化された議事録の自動生成
- アクションアイテムの自動抽出
- Markdown形式でのアウトプット
- 生成結果のコピー・ダウンロード機能

### 副次機能
- 音声再生機能（確認用）
- 認識精度の手動調整機能
- テンプレートのカスタマイズ機能
- 複数言語対応（日本語・英語）

## 技術要件

### フロントエンド技術
- **React.js**: コンポーネントベースの開発、状態管理
- **HTML5**: File API, Audio API
- **JavaScript ES6+**: 非同期処理、モジュール管理
- **複数音声認識エンジン対応**:
  - Web Speech API (ブラウザネイティブ)
  - OpenAI Whisper Web (ローカル実行)
  - SpeechRecognition.js (オープンソース)
- **CSS3/Styled-Components**: レスポンシブデザイン
- **Web Audio API**: 音声ファイルの解析・処理

### 対応ブラウザ
- Chrome 25+ (推奨)
- Firefox 44+
- Safari 14.1+
- Edge 79+

### ファイル形式対応
- **入力**: MP3, WAV, M4A, OGG
- **出力**: Markdown (.md), Plain Text (.txt)

## UI/UX要件

### レイアウト構成
1. **ヘッダー**: ツール名、バージョン情報
2. **アップロード領域**: ドラッグ&ドロップ対応
3. **設定パネル**: 言語設定、テンプレート選択
4. **処理状況表示**: プログレスバー、ステータス
5. **結果表示領域**: プレビュー、編集機能
6. **出力操作**: コピー、ダウンロードボタン

### デザイン指針
- シンプルで直感的なインターフェース
- ビジネス用途を意識したプロフェッショナルな外観
- 処理中の待機時間を考慮したUX
- モバイル対応（レスポンシブ）

## 出力フォーマット仕様

### 議事録構造
```markdown
# 会議議事録

## 基本情報
- **日時**: [自動取得 or 手動入力]
- **参加者**: [話者分析結果]
- **時間**: [音声ファイル長]

## 会議内容

### 主な議題
1. [抽出された議題1]
2. [抽出された議題2]

### 議事詳細
**[話者A]**: [発言内容]
**[話者B]**: [発言内容]

## アクションアイテム
- [ ] [アクション1] (担当: [担当者], 期限: [期限])
- [ ] [アクション2] (担当: [担当者], 期限: [期限])

## 決定事項
1. [決定事項1]
2. [決定事項2]

## 次回会議
- 日時: [次回予定]
- 議題: [次回議題]
```

## 開発フェーズ・工程

### Phase 1: 基盤開発 (1-2週間)
#### 1.1 プロジェクトセットアップ
- [ ] React.jsプロジェクト作成（Vite使用推奨）
- [ ] 必要ライブラリのインストール
  - @xenova/transformers（Whisper.js）
  - styled-components
  - react-dropzone（ファイルアップロード）
- [ ] コンポーネント構造の設計
- [ ] 状態管理設計（Context API or Zustand）

#### 1.2 ファイルアップロード機能
- [ ] File API実装
- [ ] ドラッグ&ドロップ対応
- [ ] ファイル形式検証
- [ ] ファイルサイズ制限設定

#### 1.3 音声処理基盤
- [ ] Web Audio API実装
- [ ] 音声ファイル読み込み機能
- [ ] 音声再生機能
- [ ] 音声データの前処理

### Phase 2: 音声認識実装 (2-3週間)
#### 2.1 音声認識エンジン統合
- [ ] Whisper.js統合（メイン）
- [ ] Web Speech API実装（フォールバック）
- [ ] エンジン選択機能
- [ ] 長時間音声対応（最大10分）
- [ ] エラーハンドリング
- [ ] ブラウザ互換性対応

#### 2.2 認識精度向上
- [ ] 音声品質の事前チェック
- [ ] ノイズ除去処理
- [ ] 認識結果の後処理
- [ ] 信頼度スコアの活用

#### 2.3 話者識別機能
- [ ] 音声パターン分析
- [ ] 話者切り替わり検出
- [ ] 話者ラベリング
- [ ] 手動調整機能

### Phase 3: テキスト解析・構造化 (2-3週間)
#### 3.1 テキスト解析エンジン
- [ ] 自然言語処理ライブラリの選定
- [ ] 形態素解析実装
- [ ] キーワード抽出機能
- [ ] 文章の重要度分析

#### 3.2 議題・決定事項抽出
- [ ] 議題検出アルゴリズム
- [ ] 決定事項パターン認識
- [ ] 質問・回答ペアの抽出
- [ ] 時系列情報の整理

#### 3.3 アクションアイテム抽出
- [ ] アクションワード検出
- [ ] 担当者抽出
- [ ] 期限情報の抽出
- [ ] 重複排除・統合処理

### Phase 4: Markdown生成・出力 (1-2週間)
#### 4.1 Markdown生成エンジン
- [ ] テンプレートエンジン実装
- [ ] 動的コンテンツ挿入
- [ ] フォーマット調整機能
- [ ] プレビュー機能

#### 4.2 出力機能
- [ ] クリップボードコピー機能
- [ ] ファイルダウンロード機能
- [ ] 複数形式出力対応
- [ ] 出力設定カスタマイズ

### Phase 5: UI/UX完成・テスト (2-3週間)
#### 5.1 ユーザーインターフェース完成
- [ ] レスポンシブデザイン実装
- [ ] アニメーション・トランジション
- [ ] アクセシビリティ対応
- [ ] ユーザビリティ向上

#### 5.2 設定・カスタマイズ機能
- [ ] テンプレート選択機能
- [ ] 言語設定機能
- [ ] 出力形式設定
- [ ] 設定保存機能

#### 5.3 品質保証・テスト
- [ ] 単体テスト実装
- [ ] 統合テスト
- [ ] ブラウザ互換性テスト
- [ ] パフォーマンステスト

### Phase 6: 最適化・デプロイ (1週間)
#### 6.1 パフォーマンス最適化
- [ ] コード最適化
- [ ] メモリ使用量削減
- [ ] 処理速度向上
- [ ] ファイルサイズ最適化

#### 6.2 デプロイ準備
- [ ] プロダクションビルド
- [ ] ドキュメント整備
- [ ] ユーザーマニュアル作成
- [ ] デプロイメント

## 技術的制約・考慮事項

## 60秒制限突破ソリューション

### 解決策1: 音声分割＋連続処理
- 音声ファイルを60秒チャンクに自動分割
- 各チャンクを順次Web Speech APIで処理
- 結果を結合して完全なテキストを生成
- オーバーラップ処理で文章の途切れを補完

### 解決策2: Whisper.js統合 (推奨)
- OpenAI WhisperモデルのWebAssembly版を使用
- ブラウザ上で完全にローカル実行
- 時間制限なし（最大10分対応）
- 日本語認識精度が高い
- CDN: `https://cdn.jsdelivr.net/npm/@xenova/transformers`

### 解決策3: ハイブリッド方式
- 短時間（<5分）: Web Speech API
- 長時間（5-10分）: Whisper.js
- ユーザーが選択可能
- フォールバック機能付き

### 技術実装詳細
```javascript
// Whisper.js実装例
import { pipeline } from '@xenova/transformers';

const transcriber = await pipeline('automatic-speech-recognition', 
  'Xenova/whisper-small', { quantized: false });

// 10分音声も処理可能
const result = await transcriber(audioData);
```

### パフォーマンス考慮
- 大容量音声ファイルの処理
- メモリ使用量の最適化
- リアルタイム処理の応答性
- ブラウザのタブフリーズ防止

### セキュリティ・プライバシー
- 音声データのローカル処理
- 外部サーバーへのデータ送信なし
- ファイル処理後の自動削除
- 機密情報の保護

## リスク・対策

### 高リスク
- **Web Speech API制約**: 代替手段の検討、分割処理の実装
- **認識精度**: 手動編集機能、複数エンジン対応
- **ブラウザ互換性**: ポリフィル実装、フォールバック機能

### 中リスク
- **処理時間**: プログレス表示、非同期処理
- **メモリ使用量**: チャンク分割、ガベージコレクション最適化

## 成果物

1. **Webアプリケーション一式**
2. **ユーザーマニュアル**
3. **技術ドキュメント**
4. **テストレポート**
5. **デプロイメントガイド**

## 成功指標

- 音声認識精度: 80%以上
- アクションアイテム抽出精度: 70%以上
- 処理時間: 10分音声で5分以内
- ユーザビリティスコア: 4.0/5.0以上

---

**開発開始予定**: [開始日]  
**完成予定**: [完成予定日]  
**開発者**: [開発者名]
